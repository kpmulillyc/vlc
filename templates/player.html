{% extends "index.html" %}
{% block body %}
<script src="http://player.twitch.tv/js/embed/v1.js"></script>
<div id="{PLAYER_DIV_ID}"></div>
<script type="text/javascript">
    var options = {
    width : 360,
    height: 240,
    channel: "{{channel}}",
    };
    var player = new Twitch.Player("{PLAYER_DIV_ID}", options);
    player.setVolume(0.5);
</script>
         <form action="{{ url_for('play') }}" method="POST">
          <select name='quality' id="quality">
        <option value='best'>Source</option>
        <option value='high'>High</option>
        <option value='medium'>Medium</option>
        <option value='worst'>Low</option>
          </select>
            <button class="btn btn-success" type="button" id="play">Play Stream </button>
            <button class="btn btn-danger" type="button" id="stop">Stop Stream </button>
			<p></p>
			<p><font color="orange" size="5px"><strong><span id="result">Checking for Server connection </span></strong></font> </p>
         </form>

</div>
<script type=text/javascript>
    $(function(){
        setInterval(function(){
            $.ajax({
          url : "{{ url_for('check') }}",
          type : 'GET',
          success : function(data){
				$("#result").html(data.result);
		}
        });
        },5000);
    });
</script>
<script type=text/javascript>
    $(function(){
        $("#stop").click(function(){
            $.ajax({
          url : "{{ url_for('stop') }}",type : 'POST',
          success : alert("Stopping Server boy" )
        });
        });
    });
</script>
<script type="text/javascript">
    $(function(){
        $("#play").click(function(){
            $.ajax({
          url : "{{ url_for('play') }}",
          data : $('#quality').serialize(),
          dataType: 'text/plain',
          type : 'POST',
          success : alert("Starting Server on "+$('#quality').val())
		});
        });
    });
</script>


{% endblock %}
